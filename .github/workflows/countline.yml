name: Count Lines of md
on: [pull_request]

jobs:
  count-lines:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v3


      - name: Count Lines of md 📊
        run: |
          # 탐색할 디렉터리 설정, 기본값은 현재 디렉터리
          DIRECTORY=${1:-.}

          # .md 파일 찾기 및 줄 수 계산
          find "$DIRECTORY" -type f -name "*.md" | while read -r file; do
            line_count=$(wc -l < "$file")
            if [ "$line_count" -le 10 ]; then
              echo "Error: File '$file' has 10 lines or less ($line_count lines)." >&2
              exit 1
            fi
          done

          echo "All .md files have more than 10 lines."